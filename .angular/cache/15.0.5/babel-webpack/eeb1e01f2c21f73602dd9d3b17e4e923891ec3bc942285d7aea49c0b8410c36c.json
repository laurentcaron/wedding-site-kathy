{"ast":null,"code":"import _asyncToGenerator from \"/Users/laurentcaron/Desktop/wedding-site-kathy/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"@angular/common\";\nfunction AppComponent_ng_container_7_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \",\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction AppComponent_ng_container_7_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \" &\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction AppComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵtemplate(2, AppComponent_ng_container_7_ng_container_2_Template, 2, 0, \"ng-container\", 20);\n    i0.ɵɵtemplate(3, AppComponent_ng_container_7_ng_container_3_Template, 2, 0, \"ng-container\", 20);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const guest_r3 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", guest_r3.first, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r4 + 1 < ctx_r0.guestList.length - 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r4 + 1 === ctx_r0.guestList.length - 1);\n  }\n}\nfunction AppComponent_form_41_ng_container_1_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r14 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", option_r14.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r14.text, \" \");\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"name\": a0\n  };\n};\nfunction AppComponent_form_41_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 24)(2, \"h2\", 25);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"select\", 26)(5, \"option\", 27);\n    i0.ɵɵtext(6, \"Will you be joining us?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, AppComponent_form_41_ng_container_1_option_7_Template, 2, 2, \"option\", 28);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const guest_r11 = ctx.$implicit;\n    const i_r12 = ctx.index;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(4, _c0, i_r12 > 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(guest_r11.first + \" \" + guest_r11.last);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formControlName\", guest_r11.first);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.joiningOptions);\n  }\n}\nfunction AppComponent_form_41_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"RSVP\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction AppComponent_form_41_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"img\", 30);\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction AppComponent_form_41_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r10.errorMessage);\n  }\n}\nfunction AppComponent_form_41_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 21);\n    i0.ɵɵlistener(\"submit\", function AppComponent_form_41_Template_form_submit_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.submit());\n    });\n    i0.ɵɵtemplate(1, AppComponent_form_41_ng_container_1_Template, 8, 6, \"ng-container\", 5);\n    i0.ɵɵelement(2, \"div\", 13);\n    i0.ɵɵelementStart(3, \"button\", 22);\n    i0.ɵɵtemplate(4, AppComponent_form_41_ng_container_4_Template, 2, 0, \"ng-container\", 20);\n    i0.ɵɵtemplate(5, AppComponent_form_41_ng_container_5_Template, 2, 0, \"ng-container\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, AppComponent_form_41_span_6_Template, 2, 1, \"span\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.form);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.guestList);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.errorMessage);\n  }\n}\nfunction AppComponent_div_42_h3_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\");\n    i0.ɵɵtext(1, \" Thank you for completing the form! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_div_42_h3_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\");\n    i0.ɵɵtext(1, \" Gotcha! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_div_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵtemplate(1, AppComponent_div_42_h3_1_Template, 2, 0, \"h3\", 20);\n    i0.ɵɵtemplate(2, AppComponent_div_42_h3_2_Template, 2, 0, \"h3\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.shouldHideForm);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.shouldShowGotcha);\n  }\n}\nexport class AppComponent {\n  constructor(route, fb, http) {\n    this.route = route;\n    this.fb = fb;\n    this.http = http;\n    this.title = 'wedding';\n    this.joiningOptions = [{\n      text: 'Yes, I\\'m excited to attend',\n      id: 'yes'\n    }, {\n      text: 'No, I will sadly miss out',\n      id: 'no'\n    }];\n    this.guestList = [];\n    this.subscriptions = [];\n    this.errorMessage = '';\n    this.shouldHideForm = false;\n    this.shouldShowGotcha = false;\n    this.loading = false;\n    this.form = this.fb.group({\n      joining: this.fb.group({})\n    });\n  }\n  ngOnInit() {\n    this.subscriptions.push(this.route.queryParams.subscribe(params => {\n      if (params) {\n        if (params['guests']) {\n          const guests = params['guests'].split('@');\n          guests.forEach(guest => {\n            const fullName = guest.split('_');\n            this.guestList.push({\n              first: fullName[0],\n              last: fullName[1]\n            });\n          });\n          this.namesExists();\n          this.guestsExists();\n          for (const guest of this.guestList) {\n            this.form.get('joining').addControl(guest.first, new FormControl('', Validators.required));\n          }\n        }\n      }\n    }));\n  }\n  namesExists() {\n    this.subscriptions.push(this.http.post('https://us-central1-lealaurentwedding.cloudfunctions.net/namesExists', {\n      names: this.guestList\n    }).subscribe(result => {\n      if (!result.exists) {\n        this.shouldShowGotcha = true;\n      }\n    }));\n  }\n  guestsExists() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.subscriptions.push(_this.http.post('https://us-central1-lealaurentwedding.cloudfunctions.net/guestsExists', {\n        guests: _this.guestList\n      }).subscribe(result => {\n        if (result.exists) {\n          _this.shouldHideForm = true;\n        }\n      }));\n    })();\n  }\n  addToCalendar() {\n    const start = new Date(2023, 8, 19);\n    const end = new Date(2023, 8, 20);\n    const final_date = this.format_date(start) + \"/\" + this.format_date(end);\n    const name = \"Wedding Lea and Laurent\";\n    const description = `Join us as we walk down the aisle. %0A%0ACeremony starts at 3:00 PM %0AChapelle Notre-Dame-du-Sacré-Coeur https://goo.gl/maps/dwtnANP8K7yoJmeB8 %0A426 Rue Saint-Sulpice, Montreal, QC, Canada %0A%0AReception starts at 5:15 PM %0AHotel InterContinental https://goo.gl/maps/pksb2dojYLVv8jGP9 %0A360 Rue Saint-Antoine O, Montreal, QC, Canada %0A`;\n    const loc = '426 St Sulpice St, Montreal, Quebec H2Y 2V5';\n    const href = \"https://www.google.com/calendar/render?action=TEMPLATE&text=\" + name + \"&dates=\" + final_date + \"&details=\" + description + \"&location=\" + loc + \"&sf=true&output=xml\";\n    window.open(href, '_blank');\n  }\n  zero_pad2(num) {\n    if (num < 10) return \"0\" + num;\n    return num;\n  }\n  format_date(date) {\n    var day = date.getDate();\n    var monthIndex = date.getMonth();\n    var year = date.getFullYear();\n    let formatted_date;\n    formatted_date = \"\" + year + this.zero_pad2(monthIndex) + this.zero_pad2(day);\n    return formatted_date;\n  }\n  submit() {\n    if (this.form.invalid) {\n      this.errorMessage = 'Please complete the form';\n      return;\n    }\n    for (const guest of this.guestList) {\n      if (this.form.get(`joining.${guest.first}`).value === 'yes') {\n        if (!this.form.get(`diner.${guest.first}`).value) {\n          this.errorMessage = 'Please complete the form';\n          return;\n        }\n      }\n    }\n    const result = [];\n    for (const guest of this.guestList) {\n      result.push({\n        first: guest.first,\n        last: guest.last,\n        joining: this.form.get(`joining.${guest.first}`).value,\n        diner: this.form.get(`diner.${guest.first}`).value,\n        restriction: this.form.get(`restrictions.${guest.first}`).value\n      });\n    }\n    try {\n      this.loading = true;\n      this.subscriptions.push(this.http.post('https://us-central1-lealaurentwedding.cloudfunctions.net/addGuests', {\n        guests: result\n      }).subscribe(() => {\n        localStorage.setItem('shouldHideForm', 'true');\n        this.shouldHideForm = true;\n        this.loading = false;\n      }));\n    } catch (err) {\n      console.error('An error occurred while adding the guests data', err);\n      this.loading = false;\n    }\n  }\n  ngOnDestroy() {\n    this.subscriptions.forEach(sub => sub.unsubscribe());\n  }\n}\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.HttpClient));\n};\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 45,\n  vars: 4,\n  consts: [[\"role\", \"main\", 1, \"content\"], [1, \"container\"], [1, \"section\", \"names\"], [3, \"src\"], [1, \"section\", \"salute\"], [4, \"ngFor\", \"ngForOf\"], [1, \"join-us\"], [1, \"section\", \"info\"], [\"href\", \"https://goo.gl/maps/dwtnANP8K7yoJmeB8\", \"target\", \"_blank\", 1, \"link\"], [1, \"second-part\"], [\"href\", \"https://goo.gl/maps/pksb2dojYLVv8jGP9\", \"target\", \"_blank\", 1, \"link\"], [1, \"calendar-button\", 3, \"click\"], [1, \"section\", \"info-sec\"], [1, \"divider\"], [1, \"big-margin\"], [1, \"section\", \"photo\", \"photo-1\"], [1, \"section\", \"respond\"], [\"class\", \"section form-section\", 3, \"formGroup\", \"submit\", 4, \"ngIf\"], [\"class\", \"section completed-form\", 4, \"ngIf\"], [1, \"section\", \"photo\", \"photo-2\"], [4, \"ngIf\"], [1, \"section\", \"form-section\", 3, \"formGroup\", \"submit\"], [\"type\", \"submit\", 1, \"submit-button\", 3, \"disabled\"], [\"class\", \"margin-16 error\", 4, \"ngIf\"], [\"formGroupName\", \"joining\", 1, \"col\", \"space-between\", \"joining-group\", \"select-test\"], [3, \"ngClass\"], [3, \"formControlName\"], [\"value\", \"\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngValue\"], [\"src\", \"../assets/images/spinner.svg\"], [1, \"margin-16\", \"error\"], [1, \"section\", \"completed-form\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n      i0.ɵɵelement(3, \"img\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 4)(5, \"h1\");\n      i0.ɵɵtext(6, \" Hi \");\n      i0.ɵɵtemplate(7, AppComponent_ng_container_7_Template, 4, 3, \"ng-container\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"h2\", 6);\n      i0.ɵɵtext(9, \" Please join us as we walk down the aisle on August 19th, 2023 \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"div\", 7)(11, \"h3\");\n      i0.ɵɵtext(12, \" Ceremony starts at 3:00 PM \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"a\", 8);\n      i0.ɵɵtext(14, \" Chapelle Notre-Dame-du-Sacr\\u00E9-Coeur \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"h3\");\n      i0.ɵɵtext(16, \" 426 Rue Saint-Sulpice, Montreal, QC, Canada \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"h3\", 9);\n      i0.ɵɵtext(18, \" Reception starts at 5:15 PM \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"a\", 10);\n      i0.ɵɵtext(20, \" Hotel InterContinental \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"h3\");\n      i0.ɵɵtext(22, \" 360 Rue Saint-Antoine O, Montreal, QC, Canada \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_23_listener() {\n        return ctx.addToCalendar();\n      });\n      i0.ɵɵtext(24, \" Add to calendar \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(25, \"div\", 12)(26, \"h2\");\n      i0.ɵɵtext(27, \" Dress Code \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"h3\");\n      i0.ɵɵtext(29, \" Formal attire \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(30, \"div\", 13);\n      i0.ɵɵelementStart(31, \"h2\");\n      i0.ɵɵtext(32, \" Gifts \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"h3\", 14);\n      i0.ɵɵtext(34, \" Your love and presence are the most precious gifts to us. If you wish to help us celebrate with a contribution, you may send it either to leaandlaurent@gmail.com, or a wishing well will be available at the reception. \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(35, \"div\", 15);\n      i0.ɵɵelementStart(36, \"div\", 16)(37, \"h2\");\n      i0.ɵɵtext(38, \" Kindly Respond \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"h3\");\n      i0.ɵɵtext(40, \" Please RSVP by July 7 \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(41, AppComponent_form_41_Template, 7, 6, \"form\", 17);\n      i0.ɵɵtemplate(42, AppComponent_div_42_Template, 3, 2, \"div\", 18);\n      i0.ɵɵelement(43, \"div\", 19);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(44, \"router-outlet\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"src\", \"/assets/images/image000000_4.jpg\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.guestList);\n      i0.ɵɵadvance(34);\n      i0.ɵɵproperty(\"ngIf\", !ctx.shouldHideForm && !ctx.shouldShowGotcha);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.shouldHideForm || ctx.shouldShowGotcha);\n    }\n  },\n  dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i1.RouterOutlet, i2.ɵNgNoValidate, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i2.FormGroupName],\n  styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%];\\n (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\tvar __webpack_modules__ = ({\\n\\n 595:\\n\\n (() => {\\n\\nthrow new Error(\\\"Module build failed (from ./node_modules/sass-loader/dist/cjs.js):\\\\nSassError: expected \\\\\\\")\\\\\\\".\\\\n    \\u2577\\\\n211 \\u2502         background-image: url(../ assets/images/image000000_4.jpg);\\\\n    \\u2502                               ^\\\\n    \\u2575\\\\n  src/app/app.component.scss 211:31  root stylesheet\\\");\\n\\n })\\n\\n \\t});\\n\\n \\t\\n \\t// startup\\n \\t// Load entry module and return exports\\n \\t// This entry module doesn't tell about it's top-level declarations so it can't be inlined\\n \\tvar __webpack_exports__ = {};\\n \\t__webpack_modules__[595]();\\n \\tresource = __webpack_exports__;\\n \\t\\n })()\\n;\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","Validators","i0","AppComponent","constructor","route","fb","http","text","id","group","joining","ngOnInit","subscriptions","push","queryParams","subscribe","params","guests","split","forEach","guest","fullName","guestList","first","last","namesExists","guestsExists","form","get","addControl","required","post","names","result","exists","shouldShowGotcha","shouldHideForm","addToCalendar","start","Date","end","final_date","format_date","name","description","loc","href","window","open","zero_pad2","num","date","day","getDate","monthIndex","getMonth","year","getFullYear","formatted_date","submit","invalid","errorMessage","value","diner","restriction","loading","localStorage","setItem","err","console","error","ngOnDestroy","sub","unsubscribe","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/laurentcaron/Desktop/wedding-site-kathy/src/app/app.component.ts","/Users/laurentcaron/Desktop/wedding-site-kathy/src/app/app.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\ninterface Exists {\n  exists: boolean;\n}\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit, OnDestroy {\n  title = 'wedding';\n  joiningOptions = [\n    {\n      text: 'Yes, I\\'m excited to attend',\n      id: 'yes'\n    },\n    {\n      text: 'No, I will sadly miss out',\n      id: 'no'\n    }\n  ];\n\n  guestList: { first: string; last: string; }[] = [];\n  subscriptions: Subscription[] = [];\n  errorMessage: string = '';\n  shouldHideForm: boolean = false;\n  shouldShowGotcha: boolean = false;\n  loading: boolean = false;\n\n  form: FormGroup = this.fb.group({\n    joining: this.fb.group({}),\n  });\n\n  constructor(\n    private route: ActivatedRoute,\n    private fb: FormBuilder,\n    private http: HttpClient\n  ) { }\n\n  public ngOnInit(): void {\n    this.subscriptions.push(this.route.queryParams.subscribe(params => {\n      if (params) {\n        if (params['guests']) {\n          const guests = (params['guests'] as string).split('@');\n          guests.forEach(guest => {\n            const fullName = guest.split('_');\n            this.guestList.push({\n              first: fullName[0],\n              last: fullName[1]\n            });\n          });\n\n          this.namesExists()\n          this.guestsExists();\n\n          for (const guest of this.guestList) {\n            (this.form.get('joining') as FormGroup).addControl(guest.first, new FormControl('', Validators.required));\n          }\n        }\n      }\n    }));\n  }\n\n  private namesExists() {\n    this.subscriptions.push(this.http.post<Exists>('https://us-central1-lealaurentwedding.cloudfunctions.net/namesExists', {\n      names: this.guestList\n    }).subscribe((result: Exists) => {\n      if (!result.exists) {\n        this.shouldShowGotcha = true;\n      }\n    }));\n  }\n\n  private async guestsExists() {\n    this.subscriptions.push(this.http.post<Exists>('https://us-central1-lealaurentwedding.cloudfunctions.net/guestsExists', {\n      guests: this.guestList\n    }).subscribe((result: Exists) => {\n      if (result.exists) {\n        this.shouldHideForm = true;\n      }\n    }));\n  }\n\n  public addToCalendar() {\n    const start = new Date(2023, 8, 19)\n    const end = new Date(2023, 8, 20)\n    const final_date = this.format_date(start) + \"/\" + this.format_date(end);\n    const name = \"Wedding Lea and Laurent\";\n    const description = `Join us as we walk down the aisle. %0A%0ACeremony starts at 3:00 PM %0AChapelle Notre-Dame-du-Sacré-Coeur https://goo.gl/maps/dwtnANP8K7yoJmeB8 %0A426 Rue Saint-Sulpice, Montreal, QC, Canada %0A%0AReception starts at 5:15 PM %0AHotel InterContinental https://goo.gl/maps/pksb2dojYLVv8jGP9 %0A360 Rue Saint-Antoine O, Montreal, QC, Canada %0A`;\n    const loc = '426 St Sulpice St, Montreal, Quebec H2Y 2V5';\n    const href = \"https://www.google.com/calendar/render?action=TEMPLATE&text=\"+ name +\"&dates=\"+ final_date +\"&details=\"+ description +\"&location=\"+ loc +\"&sf=true&output=xml\";\n    window.open(href,'_blank');\n  }\n  \n  private zero_pad2(num: number) {\n    if(num < 10) return \"0\" + num;\n      return num;\n  }\n\n  private format_date(date: Date) {\n    var day = date.getDate();\n    var monthIndex = date.getMonth();\n    var year = date.getFullYear();\n    \n    let formatted_date;\n    formatted_date = (\"\" + year) + this.zero_pad2(monthIndex) + this.zero_pad2(day);\n    \n    return formatted_date;\n  }\n\n  public submit() {\n    if (this.form.invalid) {\n      this.errorMessage = 'Please complete the form';\n      return;\n    }\n\n    for (const guest of this.guestList) {\n      if ((this.form.get(`joining.${guest.first}`) as FormControl).value === 'yes') {\n        if (!(this.form.get(`diner.${guest.first}`) as FormControl).value) {\n          this.errorMessage = 'Please complete the form';\n          return;\n        }\n      }\n    }\n\n    const result: any[] = [];\n    for (const guest of this.guestList) {\n      result.push({\n        first: guest.first,\n        last: guest.last,\n        joining: (this.form.get(`joining.${guest.first}`) as FormControl).value,\n        diner: (this.form.get(`diner.${guest.first}`) as FormControl).value,\n        restriction: (this.form.get(`restrictions.${guest.first}`) as FormControl).value\n      });\n    }\n\n    try {\n      this.loading = true;\n      this.subscriptions.push(this.http.post('https://us-central1-lealaurentwedding.cloudfunctions.net/addGuests', {\n        guests: result\n      }).subscribe(() => {\n        localStorage.setItem('shouldHideForm', 'true');\n        this.shouldHideForm = true;\n        this.loading = false;\n      }));\n    } catch (err) {\n      console.error('An error occurred while adding the guests data', err);\n      this.loading = false;\n    }\n  }\n\n  public ngOnDestroy(): void {\n    this.subscriptions.forEach(sub => sub.unsubscribe());\n  }\n}\n","\n<!-- Toolbar -->\n<!-- <div class=\"toolbar\" role=\"banner\">\n\n</div> -->\n\n<div class=\"content\" role=\"main\">\n  <div class=\"container\">\n    <div class=\"section names\">\n      <img [src]=\"'/assets/images/image000000_4.jpg'\">\n    </div>\n\n    <div class=\"section salute\">\n      <h1>\n        Hi\n        <ng-container *ngFor=\"let guest of guestList; let i = index\">\n          {{ guest.first }}<ng-container *ngIf=\"i + 1 < guestList.length - 1\">,</ng-container> \n          <ng-container *ngIf=\"i + 1 === guestList.length - 1\"> &</ng-container>\n        </ng-container>\n      </h1>\n\n      <h2 class=\"join-us\">\n        Please join us as we walk down the aisle on August 19th, 2023\n      </h2>\n    </div>\n\n    <div class=\"section info\">\n      <h3>\n        Ceremony starts at 3:00 PM\n      </h3>\n\n      <a href=\"https://goo.gl/maps/dwtnANP8K7yoJmeB8\" target=\"_blank\" class=\"link\">\n        Chapelle Notre-Dame-du-Sacré-Coeur\n      </a>\n\n      <h3>\n        426 Rue Saint-Sulpice, Montreal, QC, Canada\n      </h3>\n\n      <h3 class=\"second-part\">\n        Reception starts at 5:15 PM\n      </h3>\n      <a href=\"https://goo.gl/maps/pksb2dojYLVv8jGP9\" target=\"_blank\" class=\"link\">\n        Hotel InterContinental\n      </a>\n      <h3>\n        360 Rue Saint-Antoine O, Montreal, QC, Canada\n      </h3>\n\n      <button class=\"calendar-button\" (click)=\"addToCalendar()\">\n        Add to calendar\n      </button>\n    </div>\n\n    <div class=\"section info-sec\">\n      <h2>\n        Dress Code\n      </h2>\n      <h3>\n        Formal attire\n      </h3>\n\n      <div class=\"divider\"></div>\n\n      <h2>\n        Gifts\n      </h2>\n      <h3 class=\"big-margin\">\n        Your love and presence are the most precious gifts to us. If you wish to help us celebrate with a contribution, you may send it either to leaandlaurent@gmail.com, or a wishing well will be available at the reception.\n      </h3>\n    </div>\n\n    <div class=\"section photo photo-1\"></div>\n\n    <div class=\"section respond\">\n      <h2>\n        Kindly Respond\n      </h2>\n      <h3>\n        Please RSVP by July 7\n      </h3>\n    </div>\n  \n    <form [formGroup]=\"form\" class=\"section form-section\" (submit)=\"submit()\" *ngIf=\"!shouldHideForm && !shouldShowGotcha\">\n      <ng-container *ngFor=\"let guest of guestList; let i = index\">\n        <div formGroupName=\"joining\" class=\"col space-between joining-group select-test\">\n          <h2 [ngClass]=\"{'name': i > 0}\">{{ guest.first + ' ' + guest.last}}</h2>\n          <select [formControlName]=\"guest.first\">\n            <option value=\"\">Will you be joining us?</option>\n            <option *ngFor=\"let option of joiningOptions\" [ngValue]=\"option.id\">\n              {{ option.text }}\n            </option>\n          </select>\n        </div>\n      </ng-container>\n\n      <div class=\"divider\"></div>\n\n      <button type=\"submit\" class=\"submit-button\" [disabled]=\"loading\">\n        <ng-container *ngIf=\"!loading\">RSVP</ng-container>\n        <ng-container *ngIf=\"loading\"><img src=\"../assets/images/spinner.svg\"></ng-container>\n      </button>\n      <span class=\"margin-16 error\" *ngIf=\"errorMessage\">{{errorMessage}}</span>\n\n    </form>\n\n    <div class=\"section completed-form\" *ngIf=\"shouldHideForm || shouldShowGotcha\">\n      <h3 *ngIf=\"shouldHideForm\">\n        Thank you for completing the form!\n      </h3>\n      <h3 *ngIf=\"shouldShowGotcha\">\n        Gotcha!\n      </h3>\n    </div>\n\n    <div class=\"section photo photo-2\"></div>\n\n  </div>\n</div>\n\n<router-outlet></router-outlet>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}